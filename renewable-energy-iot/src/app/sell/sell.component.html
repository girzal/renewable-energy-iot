<div class="example-container " [ngClass]="{'overlay' : isProcessing}">
  <div class="table-loading-shade" *ngIf="isProcessing">
    <div *ngIf="isProcessing" class="spinner-border spinner text-primary">
    </div>
  </div>

  <form>
    <div class="form-group form-inline" [ngClass]="{'hide' : isProcessing}">
      Full text search: <input class="form-control ml-2" type="text" name="searchTerm"
        [(ngModel)]="service.searchTerm" />
      <span class="ml-3" *ngIf="service.loading$ | async">Loading...</span>
    </div>

    <div class="table-container">

      <!-- <div class="table-loading-shade" *ngIf="isProcessing">
      <div *ngIf="isProcessing" class="spinner-border text-primary" style="width: 80px; height: 80px;">
      <span class="sr-only">Loading...</span>
      </div>
    </div> -->


      <table class="table table-striped" [ngClass]="{'hide' : isProcessing}">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th sortable="name" scope="user_id" (sort)="onSort($event)">Email</th>
            <th scope="col" sortable="total_volume" (sort)="onSort($event)">Available Volume (kWh)</th>
            <th scope="col" sortable="Unit Price Per 100 Unit" (sort)="onSort($event)">Total Price (Per 100 kWh)</th>
            <th scope="col">
              Action
              <!-- <i class="material-icons" placement="bottom" container="body" ngbTooltip="Add student" >Available</i> -->
              <!-- <i class="material-icons" placement="bottom" container="body" ngbTooltip="Delete selected" (click)="onDeleteSelectedClick()">delete_sweep</i> -->
            </th>
          </tr>
        </thead>
        <tbody>
          <!-- <tr *ngFor="let userData of userDataList$ | async" (click)="selectUsers($event, userData);" [class.selected]="userData.flag === true"> -->
          <tr *ngFor="let userData of userDataList$ | async" (click)="selectUsers($event, userData);">
            <th scope="row">{{ userData.Name }}</th>
            <td>
              <!-- <img [src]="'https://upload.wikimedia.org/wikipedia/commons/' + country.flag" class="mr-2" style="width: 20px"> -->
              <ngb-highlight [result]="userData.user_id" [term]="service.searchTerm"></ngb-highlight>
            </td>
            <td>
              <ngb-highlight [result]="userData.total_volume | number" [term]="service.searchTerm"></ngb-highlight>
            </td>
            <td>
              <ngb-highlight [result]="userData.price_per_unit | number" [term]="service.searchTerm"></ngb-highlight>
            </td>
            <td id="commandColumn" scope="row">
              <button mat-raised-button (click)="openModal(mymodal,userData)"  class="btn btn-primary">Buy</button>
              <!-- <button type="button" (click)="openModal('custom-modal-1')"  class="btn btn-primary">Buy</button> -->
              <!-- <button type="button"  (click)="onClick($event)"  class="btn btn-primary">Buy</button> -->
              <!-- <i class="material-icons" placement="bottom" container="body" ngbTooltip="Buy"
                  (click)="onBuyClick(userData.user_id,userData.total_volume)">
                  <mat-icon>shopping_cart</mat-icon>
                </i> -->
              <!-- <i class="material-icons" placement="bottom" container="body" ngbTooltip="Delete student" (click)="onDeleteClick(student.studentId)">delete</i> -->
              <!-- <span *ngIf="isEditingStudent(student.studentId)">
          <i *ngIf="isUpdateDisabled()" class="material-icons" placement="bottom" container="body" ngbTooltip="Save" style="color:gray">done</i>
          <i *ngIf="!isUpdateDisabled()" class="material-icons" placement="bottom" container="body" ngbTooltip="Save" (click)="onUpdateClick()">done</i>
          <i class="material-icons" placement="bottom" container="body" ngbTooltip="Cancel" (click)="onCancelEditClick()">close</i>
          </span> -->
            </td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-between p-2">
        <ngb-pagination [ngClass]="{'hide' : isProcessing}" [collectionSize]="total$ | async" [(page)]="service.page"
          [pageSize]="service.pageSize">
        </ngb-pagination>

        <select class="custom-select" [ngClass]="{'hide' : isProcessing}" style="width: auto" name="pageSize"
          [(ngModel)]="service.pageSize">
          <option [ngValue]="2">2 items per page</option>
          <option [ngValue]="4">4 items per page</option>
          <option [ngValue]="6">6 items per page</option>
        </select>
      </div>
    </div>

  </form>

  <ng-template #mymodal let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Number of Quantity</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">Ã—</span>
      </button>
    </div>
    <div class="modal-body">
     <div class="alert alert-danger" role="alert" *ngIf="message">
       <strong >Warning!</strong> {{message}}
      </div> 
      
      <form [formGroup]="editProfileForm" (ngSubmit)="onSubmit()">
        <div class="form-group row">
          <label for="quantity" class="col-sm-4 col-form-label">Quantity :</label>
          <div class="col-sm-8">
            <input type="text" placeholder="1 Quanity = 100 kWh" class="form-control" formControlName="quantity" id="quantity">
          </div>
        </div>
        <div class="form-group row">
          <!-- <label for="total_volume" class="col-sm-4 col-form-label">Total Volume</label> -->
          <div class="col-sm-8">
            <input type="hidden" class="form-control" formControlName="total_volume" id="total_volume">
          </div>
        </div>
        <div class="form-group row">
          <!-- <label for="total_volume" class="col-sm-4 col-form-label">Total Volume</label> -->
          <div class="col-sm-8">
            <input type="hidden" class="form-control" formControlName="user_id" id="user_id">
          </div>
        </div>
        <div class="modal-footer">
          <!-- <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button> -->
          <button mat-raised-button (click)="modal.dismiss()" class="btn btn-primary">Cancel</button>
          <button mat-raised-button type="submit">Buy</button>
        </div>
      </form>
    </div>
  </ng-template>
</div>